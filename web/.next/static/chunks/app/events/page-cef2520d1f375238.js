(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{593:function(e,t,a){Promise.resolve().then(a.bind(a,9436))},9436:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var r=a(7437),s=a(7138),n=a(2265),c=a(6463),o=a(4621);function l(e){let{rows:t}=e,a=(0,c.useRouter)(),[l,i]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),h=(0,n.useMemo)(()=>{let e=l.trim().toLowerCase(),a=new Date;return t.filter(t=>{if(!d){let e=t.ends_at?new Date(t.ends_at):void 0,r=t.starts_at?new Date(t.starts_at):void 0;if(!(e&&e>=a||r&&r>=a))return!1}return!e||t.title.toLowerCase().includes(e)||(t.location||"").toLowerCase().includes(e)})},[t,l,d]);return(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Search"}),(0,r.jsx)("input",{value:l,onChange:e=>i(e.target.value),placeholder:"Event name, location…",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsx)("button",{className:"px-3 py-2 border rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>u(e=>!e),children:d?"Hide past events":"Show past events"}),(0,r.jsx)(s.default,{href:"/events/new",className:"ml-auto px-3 py-2 border rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-800",children:"New Event"})]}),(0,r.jsx)("div",{className:"border rounded",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left border-b",children:[(0,r.jsx)("th",{className:"p-2",children:"Event Name"}),(0,r.jsx)("th",{className:"p-2",children:"Starting In"}),(0,r.jsx)("th",{className:"p-2",children:"Dates"}),(0,r.jsx)("th",{className:"p-2",children:"Tickets"}),(0,r.jsx)("th",{className:"p-2",children:"Paid"}),(0,r.jsx)("th",{className:"p-2",children:"Location"}),(0,r.jsx)("th",{className:"p-2",children:"Actions"})]})}),(0,r.jsxs)("tbody",{children:[h.map(e=>{var t,n;return(0,r.jsxs)("tr",{className:"border-b last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-800/40 cursor-pointer",onClick:()=>a.push("/events/".concat(e.id,"/overview")),children:[(0,r.jsx)("td",{className:"p-2",children:e.title}),(0,r.jsx)("td",{className:"p-2 text-gray-600 text-xs",children:function(e,t){if(!e)return"";let a=new Date,r=new Date(e),s=t?new Date(t):void 0;if(s&&a>s){let e=Math.max(0,Math.floor((a.getTime()-s.getTime())/1e3)),t=Math.floor(e/86400);return"Ended ".concat(t>0?t+"d ":"").concat(Math.floor(e%86400/3600),"h ago")}if(a>=r&&(!s||a<=s))return"Live now";let n=Math.max(0,Math.floor((r.getTime()-a.getTime())/1e3)),c=Math.floor(n/86400);return"Starts in ".concat(c>0?c+"d ":"").concat(Math.floor(n%86400/3600),"h ").concat(Math.floor(n%3600/60),"m")}(e.starts_at,e.ends_at)}),(0,r.jsxs)("td",{className:"p-2 text-gray-600 text-xs",children:[(0,o.GZ)(e.starts_at||void 0),e.ends_at?" • ".concat((0,o.GZ)(e.ends_at)):""]}),(0,r.jsx)("td",{className:"p-2 text-gray-600 text-xs",children:null!==(t=e.stats.tickets_total)&&void 0!==t?t:"—"}),(0,r.jsxs)("td",{className:"p-2 text-gray-600 text-xs",children:[null!==(n=e.stats.paid_count)&&void 0!==n?n:"—",e.stats.revenue_baht?" (".concat((0,o.dN)(e.stats.revenue_baht,"THB"),")"):""]}),(0,r.jsx)("td",{className:"p-2 text-gray-600 text-xs",children:e.location||"—"}),(0,r.jsx)("td",{className:"p-2",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(s.default,{href:"/events/".concat(e.id,"/promote"),className:"px-2 py-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:"Promote"}),(0,r.jsx)(s.default,{href:"/events/".concat(e.id,"/invite"),className:"px-2 py-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:"Invite"}),(0,r.jsx)(s.default,{href:"/events/".concat(e.id,"/attendees"),className:"px-2 py-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:"Attendees"})]})})]},e.id)}),0===h.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"p-4 text-gray-500",colSpan:7,children:"No events found."})})]})]})})]})}},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},4621:function(e,t,a){"use strict";function r(e,t){if(null==e||isNaN(e))return"—";if("THB"===(t||"").toUpperCase()){var a;return null==(a=Number(e))||isNaN(a)?"-":new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",maximumFractionDigits:0}).format(Number(a))}let r=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(Number(e));return t?"".concat(r," ").concat(t):r}function s(e){if(!e)return"";let t=new Date(e);if(Number.isNaN(t.getTime()))return"";let a=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear()).slice(-2);return"".concat(a,"/").concat(r,"/").concat(s)}a.d(t,{GZ:function(){return s},dN:function(){return r}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=593)}),_N_E=e.O()}]);