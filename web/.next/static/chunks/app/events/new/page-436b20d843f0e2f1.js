(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{3738:function(e,t,n){Promise.resolve().then(n.bind(n,2986))},2986:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(7437),a=n(2265),s=n(6463),o=n(1013);function c(e,t){if(e&&t)return new Date("".concat(e,"T").concat(t,":00Z")).toISOString()}function i(){let e=new Date,t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function l(){let e=(0,s.useRouter)(),[t,n]=(0,a.useState)(""),[l,d]=(0,a.useState)(i()),[u,h]=(0,a.useState)(i()),[p,m]=(0,a.useState)("10:00"),[g,v]=(0,a.useState)("17:00"),[x,y]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[k,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[T,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)("");async function _(){try{if(S(!0),E(""),!t.trim())throw Error("Title is required");let n=c(l,p),r=g?c(u||l,g):void 0,a={title:t.trim(),starts_at:n,ends_at:r,location:x||void 0,address_maps_link:f||void 0,contact_phone:k||void 0,contact_email:N||void 0},s=await o.h.createEvent(a);e.push("/events/".concat(s.id,"/overview"))}catch(e){E((null==e?void 0:e.message)||"Failed to create event")}finally{S(!1)}}return(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("a",{href:"/events",className:"group inline-flex items-center gap-2 text-sm px-2 py-1 rounded border border-transparent hover:border-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,r.jsx)("span",{className:"inline-block",children:"←"}),(0,r.jsx)("span",{className:"sr-only sm:not-sr-only sm:inline",children:"Back to Events"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_3fr] gap-6",children:[(0,r.jsx)("nav",{className:"w-full md:w-56 lg:w-64",children:(0,r.jsx)("div",{className:"sticky top-4",children:(0,r.jsxs)("div",{className:"grid gap-1",children:[(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border bg-gray-900 text-white dark:bg-white dark:text-black",children:"Details"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Overview"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Attendees"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Purchases"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Tickets"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Promote"}),(0,r.jsx)("span",{className:"text-left block px-3 py-2 rounded border opacity-50 cursor-not-allowed",children:"Invite"})]})})}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"border rounded",children:[(0,r.jsx)("div",{className:"border-b px-4 py-3 text-base font-medium",children:"New Event"}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"grid gap-3 max-w-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Title"}),(0,r.jsx)("input",{value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_1fr_1fr] gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Start date"}),(0,r.jsx)("input",{type:"date",value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"End date"}),(0,r.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Start"}),(0,r.jsx)("input",{type:"time",step:60,value:p,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"End"}),(0,r.jsx)("input",{type:"time",step:60,value:g,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),(0,r.jsx)("input",{value:x,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Google Maps URL"}),(0,r.jsx)("input",{value:f,onChange:e=>b(e.target.value),placeholder:"https://maps.google.com/...",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Event Contact"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,r.jsx)("input",{value:k,onChange:e=>j(e.target.value),placeholder:"Phone",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"}),(0,r.jsx)("input",{value:N,onChange:e=>w(e.target.value),placeholder:"Email",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]})]}),C&&(0,r.jsx)("div",{className:"text-sm text-red-600",children:C}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:_,disabled:T,className:"px-3 py-2 border rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-800",children:T?"Creating…":"Create Event"})})]})})]})})]})]})}},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},357:function(e,t,n){"use strict";var r,a;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var i=[],l=!1,d=-1;function u(){l&&r&&(l=!1,r.length?i=r.concat(i):d=-1,i.length&&h())}function h(){if(!l){var e=c(u);l=!0;for(var t=i.length;t;){for(r=i,i=[];++d<t;)r&&r[d].run();d=-1,t=i.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new p(e,t)),1!==i.length||l||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,r),o=!1}finally{o&&delete n[e]}return s.exports}r.ab="//";var a=r(229);e.exports=a}()},1013:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(357);let a="/api",s=r.env.NEXT_PUBLIC_API_TOKEN;async function o(e,t){let n={"Content-Type":"application/json",...(null==t?void 0:t.headers)||{}};s&&(n["X-Auth-Token"]=s);let r=await fetch("".concat(a).concat(e),{headers:n,...t,cache:"no-store"});if(!r.ok){let e="".concat(r.status," ").concat(r.statusText);try{let t=await r.json();(null==t?void 0:t.detail)&&(e=Array.isArray(t.detail)?t.detail.map(e=>e.msg||e).join(", "):t.detail)}catch(e){}throw Error(e)}if(204!==r.status)return r.json()}r.env.BACKEND_ORIGIN;let c={listEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o("/events?limit=".concat(e,"&offset=").concat(t))},resolveEvent:e=>o("/events/public/".concat(encodeURIComponent(e))),getEvent:e=>o("/events/".concat(e)),createEvent:e=>o("/events",{method:"POST",body:JSON.stringify(e)}),updateEvent:(e,t)=>o("/events/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),listTicketTypes:e=>o("/events/".concat(e,"/ticket_types")),createTicketType:(e,t)=>o("/events/".concat(e,"/ticket_types"),{method:"POST",body:JSON.stringify(t)}),updateTicketType:(e,t)=>o("/events/ticket_types/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),reconciliation:e=>o("/reports/reconciliation?event_id=".concat(e)),listEventPurchases:e=>o("/events/".concat(e,"/purchases")),listAttendees:e=>o("/events/".concat(e,"/attendees")),getPurchase:e=>o("/purchases/".concat(e)),getPurchaseByGuid:e=>o("/purchases/by-guid/".concat(encodeURIComponent(e))),payPurchase:e=>o("/purchases/".concat(e,"/pay"),{method:"POST"}),resendPurchasePayment:e=>o("/purchases/".concat(e,"/resend_payment"),{method:"POST"}),listContacts:e=>{let t=new URLSearchParams;(null==e?void 0:e.search)&&t.set("search",e.search),(null==e?void 0:e.roles)&&t.set("roles",e.roles),(null==e?void 0:e.limit)!=null&&t.set("limit",String(e.limit)),(null==e?void 0:e.offset)!=null&&t.set("offset",String(e.offset));let n=t.toString()?"?".concat(t.toString()):"";return o("/contacts".concat(n))},getContact:e=>o("/contacts/".concat(e)),listContactPurchases:(e,t)=>o("/contacts/".concat(e,"/purchases").concat(t?"?event_id=".concat(t):"")),listHolderTickets:e=>o("/contacts/".concat(e,"/holder_tickets")),ticketByCode:e=>o("/tickets/by-code/".concat(encodeURIComponent(e))),ticketByToken:e=>o("/tickets/by-token/".concat(encodeURIComponent(e))),payByToken:e=>o("/tickets/pay",{method:"POST",body:JSON.stringify({token:e})}),lookupTicket:(e,t)=>o("/tickets/lookup?code=".concat(encodeURIComponent(e)).concat(t?"&event_id=".concat(t):"")),checkin:(e,t)=>o("/checkin",{method:"POST",body:JSON.stringify({event_id:e,code:t})}),listEmailLogs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o("/admin/email_logs?limit=".concat(e,"&offset=").concat(t))},sendTestEmail:e=>o("/test_email?to=".concat(encodeURIComponent(e)),{method:"POST"}),qrUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"".concat(a,"/qr?data=").concat(encodeURIComponent(e),"&scale=").concat(t)}}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3738)}),_N_E=e.O()}]);