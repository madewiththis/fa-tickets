(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{5099:function(t,e,n){Promise.resolve().then(n.bind(n,5884))},5884:function(t,e,n){"use strict";n.d(e,{default:function(){return l}});var a=n(7437),r=n(2265),o=n(1013);function s(t){if(!t)return"";let e=new Date(t),n=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r)}function c(t){if(!t)return"";let e=new Date(t),n=String(e.getUTCHours()).padStart(2,"0"),a=String(e.getUTCMinutes()).padStart(2,"0");return"".concat(n,":").concat(a)}function i(t,e){if(t&&e)return new Date("".concat(t,"T").concat(e,":00Z")).toISOString()}function l(t){let{event:e}=t,[n,l]=(0,r.useState)((null==e?void 0:e.title)||""),[d,u]=(0,r.useState)(s(null==e?void 0:e.starts_at)),[h,g]=(0,r.useState)(s((null==e?void 0:e.ends_at)||(null==e?void 0:e.starts_at))),[v,p]=(0,r.useState)(c(null==e?void 0:e.starts_at)||"10:00"),[m,f]=(0,r.useState)(c(null==e?void 0:e.ends_at)||"17:00"),[y,x]=(0,r.useState)((null==e?void 0:e.location)||""),[b,k]=(0,r.useState)((null==e?void 0:e.address_maps_link)||""),[T,S]=(0,r.useState)((null==e?void 0:e.contact_phone)||""),[j,w]=(0,r.useState)((null==e?void 0:e.contact_email)||""),[N,_]=(0,r.useState)(!1),[C,E]=(0,r.useState)(""),[P,O]=(0,r.useState)("");async function U(){try{if(_(!0),E(""),O(""),!n.trim())throw Error("Title is required");let t=i(d,v),a=m?i(h||d,m):void 0;await o.h.updateEvent(e.id,{title:n.trim(),starts_at:t,ends_at:a,location:y||void 0,address_maps_link:b||void 0,contact_phone:T||void 0,contact_email:j||void 0}),O("Saved")}catch(t){E((null==t?void 0:t.message)||"Save failed")}finally{_(!1)}}return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-3 max-w-xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Title"}),(0,a.jsx)("input",{value:n,onChange:t=>l(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_1fr_1fr] gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Start date"}),(0,a.jsx)("input",{type:"date",value:d,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"End date"}),(0,a.jsx)("input",{type:"date",value:h,onChange:t=>g(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Start"}),(0,a.jsx)("input",{type:"time",step:60,value:v,onChange:t=>p(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"End"}),(0,a.jsx)("input",{type:"time",step:60,value:m,onChange:t=>f(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),(0,a.jsx)("input",{value:y,onChange:t=>x(t.target.value),className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Google Maps URL"}),(0,a.jsx)("input",{value:b,onChange:t=>k(t.target.value),placeholder:"https://maps.google.com/...",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Event Contact"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,a.jsx)("input",{value:T,onChange:t=>S(t.target.value),placeholder:"Phone",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"}),(0,a.jsx)("input",{value:j,onChange:t=>w(t.target.value),placeholder:"Email",className:"w-full px-3 py-2 border rounded text-sm bg-white dark:bg-gray-900"})]})]}),C&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:C}),P&&(0,a.jsx)("div",{className:"text-sm text-green-600",children:P}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:U,disabled:N,className:"px-3 py-2 border rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-800",children:N?"Savingâ€¦":"Save"})})]})})}},357:function(t,e,n){"use strict";var a,r;t.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(8081)},8081:function(t){!function(){var e={229:function(t){var e,n,a,r=t.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var i=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?i=a.concat(i):d=-1,i.length&&h())}function h(){if(!l){var t=c(u);l=!0;for(var e=i.length;e;){for(a=i,i=[];++d<e;)a&&a[d].run();d=-1,e=i.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];i.push(new g(t,e)),1!==i.length||l||c(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}},s=!0;try{e[t](o,o.exports,a),s=!1}finally{s&&delete n[t]}return o.exports}a.ab="//";var r=a(229);t.exports=r}()},1013:function(t,e,n){"use strict";n.d(e,{h:function(){return c}});var a=n(357);let r="/api",o=a.env.NEXT_PUBLIC_API_TOKEN;async function s(t,e){let n={"Content-Type":"application/json",...(null==e?void 0:e.headers)||{}};o&&(n["X-Auth-Token"]=o);let a=await fetch("".concat(r).concat(t),{headers:n,...e,cache:"no-store"});if(!a.ok){let t="".concat(a.status," ").concat(a.statusText);try{let e=await a.json();(null==e?void 0:e.detail)&&(t=Array.isArray(e.detail)?e.detail.map(t=>t.msg||t).join(", "):e.detail)}catch(t){}throw Error(t)}if(204!==a.status)return a.json()}a.env.BACKEND_ORIGIN;let c={listEvents:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s("/events?limit=".concat(t,"&offset=").concat(e))},resolveEvent:t=>s("/events/public/".concat(encodeURIComponent(t))),getEvent:t=>s("/events/".concat(t)),createEvent:t=>s("/events",{method:"POST",body:JSON.stringify(t)}),updateEvent:(t,e)=>s("/events/".concat(t),{method:"PATCH",body:JSON.stringify(e)}),listTicketTypes:t=>s("/events/".concat(t,"/ticket_types")),createTicketType:(t,e)=>s("/events/".concat(t,"/ticket_types"),{method:"POST",body:JSON.stringify(e)}),updateTicketType:(t,e)=>s("/events/ticket_types/".concat(t),{method:"PATCH",body:JSON.stringify(e)}),reconciliation:t=>s("/reports/reconciliation?event_id=".concat(t)),listEventPurchases:t=>s("/events/".concat(t,"/purchases")),listAttendees:t=>s("/events/".concat(t,"/attendees")),getPurchase:t=>s("/purchases/".concat(t)),getPurchaseByGuid:t=>s("/purchases/by-guid/".concat(encodeURIComponent(t))),payPurchase:t=>s("/purchases/".concat(t,"/pay"),{method:"POST"}),resendPurchasePayment:t=>s("/purchases/".concat(t,"/resend_payment"),{method:"POST"}),listContacts:t=>{let e=new URLSearchParams;(null==t?void 0:t.search)&&e.set("search",t.search),(null==t?void 0:t.roles)&&e.set("roles",t.roles),(null==t?void 0:t.limit)!=null&&e.set("limit",String(t.limit)),(null==t?void 0:t.offset)!=null&&e.set("offset",String(t.offset));let n=e.toString()?"?".concat(e.toString()):"";return s("/contacts".concat(n))},getContact:t=>s("/contacts/".concat(t)),listContactPurchases:(t,e)=>s("/contacts/".concat(t,"/purchases").concat(e?"?event_id=".concat(e):"")),listHolderTickets:t=>s("/contacts/".concat(t,"/holder_tickets")),ticketByCode:t=>s("/tickets/by-code/".concat(encodeURIComponent(t))),ticketByToken:t=>s("/tickets/by-token/".concat(encodeURIComponent(t))),payByToken:t=>s("/tickets/pay",{method:"POST",body:JSON.stringify({token:t})}),lookupTicket:(t,e)=>s("/tickets/lookup?code=".concat(encodeURIComponent(t)).concat(e?"&event_id=".concat(e):"")),checkin:(t,e)=>s("/checkin",{method:"POST",body:JSON.stringify({event_id:t,code:e})}),listEmailLogs:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s("/admin/email_logs?limit=".concat(t,"&offset=").concat(e))},sendTestEmail:t=>s("/test_email?to=".concat(encodeURIComponent(t)),{method:"POST"}),qrUrl:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"".concat(r,"/qr?data=").concat(encodeURIComponent(t),"&scale=").concat(e)}}}},function(t){t.O(0,[971,23,744],function(){return t(t.s=5099)}),_N_E=t.O()}]);